#!/usr/bin/env bash

# OH MY P-C-C-C-C-C

# File and folder names
ssDIR="$HOME/Pictures/Screenshots"
file="$ssDIR/$(date +'screenshot_%Y-%m-%d_%H-%M-%S.png')"
exfile="${file/#\~/$HOME}"
sDIR="$HOME/.config/hypr/scripts"

mkdir -p -- "$ssDIR"

_full() {
  wayshot -f "$exfile"
  # swappy -f "$exfile" -o "$exfile"

  if wl-copy < "$exfile"; then
    notify-send -u low "Screenshot Saved" "File saved to '<i>$ssDIR</i>'" -i "$exfile"
    sounds --screenshot
  fi
}

_region() {
  wayshot -s "$(slurp)" -f "$exfile"
  # swappy -f "$exfile" -o "$exfile"

  if wl-copy < "$exfile"; then
    notify-send -u low "Screenshot Saved" "File saved to '<i>$ssDIR</i>'" -i "$exfile"
    sounds --screenshot
  fi
}

case $1 in
  --selection)
    _region
    ;;
  --full)
    _full
    ;;
  *)
    wayshot --stdout | wl-copy
    ;;
esac
